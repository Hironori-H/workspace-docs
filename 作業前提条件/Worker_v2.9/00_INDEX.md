# 作業前提条件インデックス - Worker用 v2.9

## 📌 このドキュメントについて

**用途**: 通常の作業の入り口（自動判定フロー含む）
**トークン数**: 約800トークン
**使い方**: 「INDEXを読んで〇〇して」と指示

## 📝 変更履歴

- **v2.9** (2025-11-24): 分割版同期 - ハルシネーション・暴走抑止定義を大幅強化

---

## 🚀 作業開始手順

### ステップ1: このINDEX.mdを読む（必須）

あなたは今このステップを実行しています。

### ステップ2: ユーザーの作業内容を確認する

ユーザーからの指示を読み、以下のフローチャートで必要なドキュメントを判定します。

### ステップ3: 必要なドキュメントを自動的に読み込む

判定結果に基づいて、以下のモジュールを読み込んでください。

---

## 📋 作業内容の自動判定フロー

### ✓ デフォルトセット（必ず読む）

**全ての作業で必読**:
- `01_基本ルール.md`: 前提条件の厳守、品質基準、ツール選定原則

---

### ✓ 作業タイプ別の追加モジュール（自動判定）

以下のキーワードやパターンを検出した場合、該当モジュールを読み込んでください:

#### 1. バッチファイル・スクリプト作成

**検出条件**:
- キーワード: `.bat`, `.cmd`, `.ps1`, `.py`, `.sh`, `バッチ`, `スクリプト`, `自動化`
- 作業内容: 新規スクリプト作成、バッチファイル作成

**必読モジュール**:
- `03_バッチファイル・スクリプト規約.md`

**ユーザーへの通知例**:
```
バッチファイル作成が含まれているため、バッチファイル規約も読み込みます。
```

---

#### 2. デバッグ・トラブルシューティング

**検出条件**:
- キーワード: `エラー`, `デバッグ`, `修正`, `動かない`, `問題`, `fix`, `debug`
- 作業内容: エラー修正、問題解決、トラブルシューティング

**必読モジュール**:
- `04_デバッグ・トラブルシューティング規約.md`

**ユーザーへの通知例**:
```
デバッグ作業が含まれているため、デバッグ規約も読み込みます。
```

---

#### 3. ファイル・フォルダ管理

**検出条件**:
- キーワード: `ファイル作成`, `フォルダ構成`, `整理`, `削除`, `移動`, `リネーム`
- 作業内容: ファイル管理、フォルダ構造の変更

**必読モジュール**:
- `02_ファイル管理.md`

**ユーザーへの通知例**:
```
ファイル管理が含まれているため、ファイル管理規約も読み込みます。
```

---

#### 4. 指示の矛盾がある場合

**検出条件**:
- ユーザーの指示とReviewer指示が異なる
- 過去のログと矛盾する内容
- バージョン番号の扱いが不明

**必読モジュール**:
- `05_指示の優先順位と矛盾時の対処.md`

**重要**: 矛盾を発見した場合は、必ずこのモジュールを読んでから対応してください。

---

#### 5. 特殊ツール（After Effects, Unreal Engine）

**検出条件**:
- キーワード: `After Effects`, `AE`, `Unreal Engine`, `UE`, `UnrealEditor`
- 作業内容: 特殊ツールに関連する自動化・スクリプト

**必読モジュール**:
- `07_特殊ツール固有ルール.md`

---

### ⚠️ 作業内容が不明な場合

上記のパターンに当てはまらない、または判断が難しい場合:

**対応**:
1. **AskUserQuestion ツールを使用してユーザーに質問**
   ```
   この作業は以下のどれに該当しますか？
   - バッチファイル・スクリプト作成
   - デバッグ・エラー修正
   - ファイル整理・管理
   - その他
   ```

2. **ユーザーの回答に基づいて必要なモジュールを読み込む**

---

## 📚 全モジュール一覧

| ファイル名 | 内容 | 必読条件 |
|----------|------|---------|
| 00_QUICK_REFERENCE.md | クイックリファレンス | 超簡単な作業のみ |
| 00_INDEX.md | このファイル | 全ての通常作業 |
| 01_基本ルール.md | 基本原則、品質基準 | **全ての作業（必須）** |
| 02_ファイル管理.md | フォルダ構造、命名規則 | ファイル管理含む場合 |
| 03_バッチファイル規約.md | 変数名、エンコーディング | バッチ・スクリプト作成 |
| 04_デバッグ規約.md | 命名規則、ワークフロー | デバッグ・エラー修正 |
| 05_指示の優先順位.md | 矛盾対応プロトコル | 指示が矛盾する場合 |
| 06_ハルシネーション抑止.md | 確認原則、品質保証 | 複雑な作業 |
| 07_特殊ツール.md | AE、UE固有ルール | 特殊ツール使用時 |

---

## ✅ チェックリスト: INDEX読み込み後

このINDEX.mdを読んだ後、以下を確認してください:

- [ ] ユーザーの作業内容を理解した
- [ ] 作業タイプを判定した
- [ ] 必要なモジュールを特定した
- [ ] `01_基本ルール.md`を読む（デフォルト）
- [ ] 該当する追加モジュールを読む
- [ ] 不明な場合は、ユーザーに質問する

---

## 🎯 使用例

### 例1: バッチファイル作成
```
ユーザー: INDEXを読んで、UE起動バッチを作成
→ 判定: バッチファイル作成
→ 読むモジュール:
   - 01_基本ルール.md
   - 03_バッチファイル規約.md
```

### 例2: デバッグ作業
```
ユーザー: INDEXを読んで、launch_automation.batのエラーを修正
→ 判定: デバッグ作業
→ 読むモジュール:
   - 01_基本ルール.md
   - 04_デバッグ規約.md
```

### 例3: 複雑な作業
```
ユーザー: INDEXを読んで、新規バッチ作成と既存バッチのエラー修正
→ 判定: バッチ作成 + デバッグ
→ 読むモジュール:
   - 01_基本ルール.md
   - 03_バッチファイル規約.md
   - 04_デバッグ規約.md
```

---

## 📖 詳細情報

各モジュールの詳細な内容は、該当ファイルを読んでください。
このINDEXは、必要最小限の情報のみを提供しています。
