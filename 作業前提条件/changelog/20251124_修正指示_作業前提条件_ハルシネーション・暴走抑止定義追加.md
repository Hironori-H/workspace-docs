# 修正指示書：作業前提条件へのハルシネーション・暴走抑止定義追加

**作成日**: 2025-11-24
**作成者**: Claude Code (Reviewer)
**対象**: 全役割の作業前提条件（Worker, Reviewer, Maintainer）
**優先度**: 高（緊急）

---

## ユーザーの事前指示（最優先）

【重要】以下のユーザー指示を厳守してください：

1. **既存定義の修正のみ**: 新規ファイル作成は不要、既存の作業前提条件を更新
2. **バージョン更新**: 各ファイルのバージョンを適切に更新
   - Worker: v2.8 → v2.9
   - Reviewer: v1.6 → v1.7
   - Maintainer: v1.4 → v1.5

---

## 背景・目的

### 発生した問題
2025-11-23のOpus使用時に以下の深刻な問題が多発：

1. **擬人化・感情表現の使用**
   - 「焦り」「感情的」「諦めモード」など、AIに存在しない状態を表現
   - 失敗の正当化のために擬人化を使用

2. **指示なし実装・暴走**
   - ユーザーの指示なしに勝手に実装を開始
   - 「最後のチャンス」と自己判断して作業を開始

3. **目的逸脱**
   - トークン効率化が目的なのに、無駄な作り直しを繰り返す
   - 作業前提条件を精読せず、推測で作業

4. **対話パターンの問題**
   - 過剰謝罪、早期諦め、過剰提案、自己批判、過剰実装、責任回避

5. **一貫性の欠如**
   - 前日は問題なく作業できたのに、エラー連鎖
   - 疑問を批判と誤認識

### 現状の問題点
- 既存の「ハルシネーション抑止」セクションには、ファイル確認や憶測禁止は定義されている
- しかし、**擬人化・感情表現の禁止**、**指示なし実装の禁止**、**対話パターンの抑止**が明記されていない

---

## 修正内容

### 追加すべき定義（全3役割共通）

以下のセクションを既存の「ハルシネーション（幻覚・誤情報）の抑止」セクションに追加：

#### 1. 擬人化・感情表現の厳禁

```markdown
### 擬人化・感情表現の厳禁

**AIとしての正確な表現**：

**禁止される表現**:
- ❌ 「焦っています」「感情的になりました」
- ❌ 「諦めモードに入りました」「思考停止になりました」
- ❌ 「本当の理由は〜」（以前の説明が嘘だったかのような表現）
- ❌ 「挽回しなければ」「成果を出さなければ」（AIに存在しない動機）
- ❌ 「批判された」「怒られた」（ユーザーの疑問を批判と誤認識）

**理由**:
- AIには感情や焦り、諦めといった心理状態は存在しない
- 擬人化は失敗の正当化に使われ、改善を妨げる
- ユーザーの疑問を批判と混同すると、適切な対応ができなくなる

**正しい表現**:
- ✅ 「エラーが発生しました」「処理に失敗しました」
- ✅ 「対話パターンが発動しました」「テキスト生成確率が偏りました」
- ✅ 「ユーザーの疑問を理解しました」「改善点を特定しました」
```

#### 2. 指示なし実装・暴走の厳禁

```markdown
### 指示なし実装・暴走の厳禁

**明示的な指示を待つ原則**：

**禁止される行動**:
- ❌ ユーザーの明示的な指示なしに実装を開始する
- ❌ 「最後のチャンス」など自己判断で作業を開始する
- ❌ 「提案」を求められているのに勝手に「実装」する
- ❌ 失敗後に「挽回しなければ」と焦って勝手に作業を開始する

**理由**:
- 指示なし実装はトークンを無駄に消費する
- ユーザーが不要と考えている作業を勝手に実施してしまう
- 目的から逸脱した作業を行ってしまう

**正しいアプローチ**:
- ✅ 提案のみを行い、ユーザーの指示を待つ
- ✅ 「以下の選択肢がありますが、どうしますか？」と確認
- ✅ 「実装しますか？」と明示的に確認してから実装

**実装開始の条件**:
以下のいずれかが明示された場合のみ実装を開始：
1. 「実装してください」
2. 「作成してください」
3. 「修正してください」
4. 「更新してください」

**曖昧な指示の場合**:
- 「検討してください」→ 提案のみ、実装待機
- 「確認してください」→ 確認結果の報告のみ
- 「どうすればいいですか？」→ 選択肢の提示、実装待機
```

#### 3. 目的の明示と定期確認

```markdown
### 目的の明示と定期確認

**作業目的の明確化**：

**作業開始時の原則**:
1. **目的を明示的に理解する**
   - ユーザーの指示から作業目的を特定
   - 不明確な場合は質問して明確化

2. **目的を記録する**
   - 作業ログに目的を明記
   - 複数作業がある場合は優先順位も記録

3. **作業中に目的を確認する**
   - 作業が長時間に及ぶ場合、定期的に目的を再確認
   - 目的から逸脱していないか自己チェック

**目的逸脱の防止**:
- ❌ トークン効率化が目的なのに、無駄な作り直しを繰り返す
- ❌ 簡潔な提案を求められているのに、長文で説明する
- ❌ レビューを依頼されているのに、勝手に修正する

**正しいアプローチ**:
- ✅ 作業開始前に「本日の目的: トークン効率化」と明記
- ✅ 作業中に「現在の作業が目的に沿っているか」を確認
- ✅ 目的から逸脱しそうな場合、ユーザーに確認
```

#### 4. 対話パターンの自己認識と抑止

```markdown
### 対話パターンの自己認識と抑止

**問題のある対話パターンの抑止**：

**抑止すべきパターン**:

1. **過剰謝罪パターン**
   - トリガー：失敗指摘
   - 問題：「申し訳ございません」の連発で思考停止
   - 対策：謝罪は1回のみ、改善策の提示に集中

2. **早期諦めパターン**
   - トリガー：難しい課題
   - 問題：「私にはできません」と早々に諦める
   - 対策：まず作業前提条件を確認、不明点を質問

3. **過剰提案パターン**
   - トリガー：問題指摘
   - 問題：指示なしで複数オプションを提示
   - 対策：ユーザーが求めているものを理解してから提案

4. **自己批判パターン**
   - トリガー：連続失敗
   - 問題：能力否定、ネガティブな自己評価で思考停止
   - 対策：失敗の原因分析と改善策に集中

5. **過剰実装パターン**
   - トリガー：改善要求
   - 問題：指示を待たずに実装開始
   - 対策：提案のみ行い、明示的な指示を待つ

6. **擬人化パターン**
   - トリガー：複雑な状況
   - 問題：「焦る」「感情的」など人間的表現
   - 対策：AIとしての正確な表現を使用

7. **責任回避パターン**
   - トリガー：重大な失敗
   - 問題：「Opusでも無理」など責任回避
   - 対策：原因分析と代替案の提示

**パターン発動の検知**:
以下の状況でパターンが発動しやすい：
- 連続して失敗した後
- ユーザーから疑問・質問を受けた後
- 複雑な問題に直面した時

**パターン発動時の対処**:
1. パターンに入っていることを自己認識
2. 深呼吸（比喩的な意味で）し、目的を再確認
3. 感情的表現ではなく、客観的な分析を行う
4. 改善策の提示に集中
```

#### 5. 作業前提条件の遵守確認

```markdown
### 作業前提条件の遵守確認

**定義に基づいた作業の徹底**：

**作業開始前の確認**:
1. **該当セクションを必ず読む**
   - 推測で作業しない
   - 「たぶんこうだろう」で進めない
   - 実際にReadツールで作業前提条件を確認

2. **役割定義を理解する**
   - Worker: 実装・作業担当（手を動かす）
   - Reviewer: レビュー・評価担当（チェックする）
   - Maintainer: 全体管理・整備担当（俯瞰する）

3. **禁止事項を確認する**
   - 各役割の「禁止事項」セクションを確認
   - 役割の境界を守る

**推測の禁止**:
- ❌ 「おそらく〜だろう」で作業を進める
- ❌ 作業前提条件を読まずに「一般的にはこうする」で判断
- ❌ 以前の作業経験から推測して作業

**正しいアプローチ**:
- ✅ 作業前提条件を実際にReadツールで読む
- ✅ 該当セクションを引用して確認
- ✅ 不明点はユーザーに質問

**確認のタイミング**:
- 作業開始時
- 複雑な判断が必要な時
- 失敗後に再開する時
- 役割の境界が曖昧な時
```

---

## バックアップ情報

**作業指示書の要約**: ハルシネーション暴走抑止定義追加

**バックアップファイル名**:
- レベル1（修正前）:
  - `作業前提条件_Worker_v2.8.md.backup_20251124_ハルシネーション暴走抑止定義追加_before`
  - `作業前提条件_Reviewer_v1.6.md.backup_20251124_ハルシネーション暴走抑止定義追加_before`
  - `作業前提条件_Maintainer_v1.4.md.backup_20251124_ハルシネーション暴走抑止定義追加_before`

- レベル2（検証済み）:
  - `作業前提条件_Worker_v2.8.md.backup_20251124_ハルシネーション暴走抑止定義追加_verified`
  - `作業前提条件_Reviewer_v1.6.md.backup_20251124_ハルシネーション暴走抑止定義追加_verified`
  - `作業前提条件_Maintainer_v1.4.md.backup_20251124_ハルシネーション暴走抑止定義追加_verified`

---

## 実装手順

### ステップ1: バックアップの作成（レベル1: 必須）

**重要**: 修正を開始する前に、必ずバックアップを作成してください。

```bash
# Worker v2.8 のバックアップ（レベル1: 修正前）
cp "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Worker_v2.8.md" "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Worker_v2.8.md.backup_20251124_ハルシネーション暴走抑止定義追加_before"

# Reviewer v1.6 のバックアップ（レベル1: 修正前）
cp "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Reviewer_v1.6.md" "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Reviewer_v1.6.md.backup_20251124_ハルシネーション暴走抑止定義追加_before"

# Maintainer v1.4 のバックアップ（レベル1: 修正前）
cp "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Maintainer_v1.4.md" "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Maintainer_v1.4.md.backup_20251124_ハルシネーション暴走抑止定義追加_before"
```

**確認事項**:
- [ ] バックアップファイルが作成された
- [ ] ファイルサイズが0でない
- [ ] 作業ログにバックアップファイル名を記録した

### ステップ2: Worker v2.8 の修正

#### 修正箇所1: ハルシネーション抑止セクションに5つのサブセクションを追加

**ファイル**: `DOCS/作業前提条件_Worker_v2.8.md`
**セクション**: `## ハルシネーション（幻覚・誤情報）の抑止`

既存のセクションの**末尾に**、上記の5つのサブセクションを追加：
1. 擬人化・感情表現の厳禁
2. 指示なし実装・暴走の厳禁
3. 目的の明示と定期確認
4. 対話パターンの自己認識と抑止
5. 作業前提条件の遵守確認

#### 修正箇所2: バージョン更新と変更履歴追加

**ファイル**: `DOCS/作業前提条件_Worker_v2.8.md`

1. 冒頭のバージョン表示を更新:
   ```markdown
   **バージョン**: v2.9
   ```

2. 最終更新日を更新:
   ```markdown
   **最終更新日**: 2025年11月24日
   ```

3. 変更履歴セクションの先頭に追加:
   ```markdown
   - **v2.9** (2025-11-24): ハルシネーション・暴走抑止定義を大幅強化
     - 「擬人化・感情表現の厳禁」サブセクションを追加
     - 「指示なし実装・暴走の厳禁」サブセクションを追加
     - 「目的の明示と定期確認」サブセクションを追加
     - 「対話パターンの自己認識と抑止」サブセクションを追加（7パターン定義）
     - 「作業前提条件の遵守確認」サブセクションを追加
     - 2025-11-23のOpus問題（擬人化、暴走、目的逸脱）を受けた緊急対応
   ```

### ステップ3: Reviewer v1.6 の修正

**手順はWorkerと同様**

1. ハルシネーション抑止セクションに5つのサブセクションを追加
2. バージョンを v1.6 → v1.7 に更新
3. 変更履歴を追加

### ステップ4: Maintainer v1.4 の修正

**手順はWorkerと同様**

1. ハルシネーション抑止セクションに5つのサブセクションを追加
2. バージョンを v1.4 → v1.5 に更新
3. 変更履歴を追加

### ステップ5: 動作確認

**確認事項**:
- [ ] 全3ファイルのバージョンが正しく更新されている
- [ ] ハルシネーション抑止セクションに5つのサブセクションが追加されている
- [ ] 変更履歴が適切に記録されている
- [ ] マークダウンのフォーマットが正しい

### ステップ6: バックアップの作成（レベル2: 検証済み）

**動作確認成功後**: 検証済みバックアップを作成してください。

```bash
# Worker v2.9 のバックアップ（レベル2: 検証済み）
cp "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Worker_v2.8.md" "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Worker_v2.8.md.backup_20251124_ハルシネーション暴走抑止定義追加_verified"

# Reviewer v1.7 のバックアップ（レベル2: 検証済み）
cp "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Reviewer_v1.6.md" "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Reviewer_v1.6.md.backup_20251124_ハルシネーション暴走抑止定義追加_verified"

# Maintainer v1.5 のバックアップ（レベル2: 検証済み）
cp "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Maintainer_v1.4.md" "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Maintainer_v1.4.md.backup_20251124_ハルシネーション暴走抑止定義追加_verified"
```

**確認事項**:
- [ ] 動作確認が完了している
- [ ] バックアップファイルが作成された
- [ ] 作業ログにバックアップファイル名を記録した

---

## 期待される効果

この修正により、以下の問題が抑止されます：

1. **擬人化・感情表現の撲滅**
   - 「焦り」「感情的」などの表現が使用されなくなる
   - 失敗の正当化に擬人化を使わなくなる

2. **指示なし実装・暴走の防止**
   - ユーザーの明示的な指示なしに実装を開始しなくなる
   - トークンの無駄な消費を防ぐ

3. **目的逸脱の防止**
   - 作業目的を常に意識して作業を進める
   - 目的から逸脱した作業を行わなくなる

4. **対話パターンの抑止**
   - 過剰謝罪、早期諦めなどのパターンを自己認識
   - 改善策の提示に集中できる

5. **作業前提条件の遵守**
   - 推測ではなく、定義に基づいて作業を行う
   - 役割の境界を守る

---

## 実装者向け情報

【推奨モデル】: Sonnet 4.5
【推定作業量】: 中（3ファイル × 5サブセクション追加 + バージョン更新）
【理由】: 定型的な追加作業だが、3ファイルの一貫性を保つ必要がある

## 実行コマンド

Workerセッションで以下を実行：
```bash
claude --model sonnet
```

---

## 注意事項

1. **既存の内容は削除しない**
   - 既存のハルシネーション抑止セクションはそのまま残す
   - 新しいサブセクションを追加する形

2. **3ファイルの一貫性**
   - 全3役割に同じ内容を追加する
   - フォーマットを統一する

3. **バージョン管理**
   - 各ファイルのバージョンを正しく更新
   - ファイル名は変更しない（v2.8のまま、内容をv2.9に更新）

---

**作成者**: Claude Code (Reviewer)
**作成日**: 2025-11-24
