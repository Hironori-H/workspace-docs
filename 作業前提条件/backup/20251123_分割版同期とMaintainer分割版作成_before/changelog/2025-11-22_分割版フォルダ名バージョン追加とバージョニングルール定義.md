# 修正指示書 - 分割版フォルダ名へのバージョン追加とバージョニングルール定義

**作成日**: 2025年11月22日
**対象**: 作業前提条件ドキュメント（分割版フォルダ、Maintainerドキュメント）
**目的**: 統合版と分割版のバージョン乖離を可視化し、バージョニングルールを明文化

---

## 📋 修正サマリー

1. **分割版フォルダ名にバージョン番号を追加**
   - `Worker/` → `Worker_v2.7/`
   - `Reviewer/` → `Reviewer_v1.5/`
   - 目的: 統合版と分割版の乖離を即座に把握可能にする

2. **バージョニングルールをMaintainerドキュメントに追加**
   - 既存の運用を分析し、明文化
   - メジャー/マイナーバージョンの定義を明確化

3. **関連ドキュメントの更新**
   - VERSION.md: フォルダ構造の更新
   - 利用ガイド.md: パス参照の更新
   - changelog/INDEX.md: フォルダ構造の更新

---

## 🎯 背景と理由

### 課題
- 現在のフォルダ名 (`Worker/`, `Reviewer/`) からはバージョンが分からない
- 統合版が更新されても、分割版が古いままかどうか一目で判断できない
- バージョニングルールが明文化されておらず、更新時の判断基準が不明確

### 解決策
- フォルダ名にバージョン番号を含める
- 既存の運用を分析し、バージョニングルールを定義・文書化

---

## 🔧 修正内容

### Part 1: 分割版フォルダ名の変更

#### 1-1. Worker フォルダのリネーム

**現在のフォルダ名**: `/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件/Worker/`
**新しいフォルダ名**: `/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件/Worker_v2.7/`

**手順**:
```bash
# macOSの場合
mv "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件/Worker" \
   "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件/Worker_v2.7"
```

---

#### 1-2. Reviewer フォルダのリネーム

**現在のフォルダ名**: `/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件/Reviewer/`
**新しいフォルダ名**: `/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件/Reviewer_v1.5/`

**手順**:
```bash
# macOSの場合
mv "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件/Reviewer" \
   "/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件/Reviewer_v1.5"
```

---

### Part 2: Maintainerドキュメントへのバージョニングルール追加

#### 2-1. バージョニングルールセクションの追加

**ファイルパス**: `/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Maintainer_v1.1.md`

**追加位置**: 「## Maintainerの基本原則」セクションの後（約55行目付近）

**追加内容**:

```markdown
---

## 作業前提条件ドキュメントのバージョニングルール

### 基本方針

**バージョン形式**: `vX.Y` (メジャー.マイナー)

作業前提条件ドキュメント（Worker用、Reviewer用、Maintainer用）は、セマンティックバージョニングの簡略版を採用します。

---

### メジャーバージョンアップ (X)

**定義**: 構造的な大幅変更、または互換性に影響する変更

**具体例**:
- ドキュメントの構造を大きく変更
- 役割定義の根本的な変更
- 複数の大きな新機能を同時に追加（4つ以上の新規ルール群）
- 既存ルールと矛盾する新ルールの導入
- 過去のバージョンとの互換性がなくなる変更

**過去の実例**:
- **Worker v1.2 → v2.0** (2025-11-13): 「大幅な機能追加」
  - 出力ファイル・生成ファイルの管理ルール追加
  - 作業ログ・メモの記録ルール追加
  - 環境変数・設定ファイルの管理ルール追加
  - 特殊ツール固有のルール追加

**判断基準**:
- 1つのアップデートで3つ以上の独立した大きな機能が追加される場合
- ドキュメント全体の構成が変わる場合
- 「これまでのやり方と大きく変わる」と感じる変更の場合

---

### マイナーバージョンアップ (Y)

**定義**: 新機能・ルールの追加、既存ルールの詳細化

**具体例**:
- 新しいセクションの追加
- 既存ルールの詳細化・明確化
- 新しい規約・ガイドラインの追加
- 既存機能の強化
- チェックリスト・テンプレートの追加

**過去の実例**:
- **Worker v2.6 → v2.7** (2025-11-19): バックアップ管理規約を詳細化
- **Worker v2.5 → v2.6** (2025-11-14): バッチファイル・スクリプト作成時の規約を追加
- **Reviewer v1.4 → v1.5** (2025-11-19): 作業ログ記録の必須化
- **Reviewer v1.3 → v1.4** (2025-11-19): バックアップ手順の必須化

**判断基準**:
- 新しいセクションが1-2個追加される場合
- 既存セクションに新しいルールが追加される場合
- 既存ルールをより詳しく説明する場合

---

### パッチバージョン（将来的な拡張）

**現在は使用していません**が、将来的に以下の場合に導入を検討：

**想定される用途**:
- 誤字・脱字の修正
- 軽微な表現の改善
- リンク切れの修正
- フォーマットの調整

**形式**: `vX.Y.Z`（例: v2.7.1）

---

### 統合版と分割版のバージョン管理

#### 統合版のバージョニング

**ルール**: 統合版が更新の基準となる

1. 統合版が更新されたら、バージョン番号を決定
2. VERSION.mdに変更履歴を記録
3. ファイル名にバージョン番号を含める（例: `作業前提条件_Worker_v2.7.md`）

#### 分割版のバージョニング

**ルール**: 統合版のバージョン番号に追従

1. 統合版が更新されたら、分割版も同じバージョンに更新
2. フォルダ名にバージョン番号を含める（例: `Worker_v2.7/`, `Reviewer_v1.5/`）
3. VERSION.mdの「分割版（モジュール式）」セクションを更新
4. 分割版フォルダをリネーム

**重要**: 統合版と分割版のバージョン番号は常に一致させる

---

### バージョンアップの手順

#### ステップ1: 変更内容の分析

変更内容を確認し、メジャー/マイナーどちらに該当するか判断

**判断フロー**:
```
変更内容を確認
↓
構造的な大幅変更 or 3つ以上の大きな新機能？
├─ YES → メジャーバージョンアップ (vX.0)
└─ NO
   ↓
   新しいセクション追加 or 既存ルールの詳細化？
   ├─ YES → マイナーバージョンアップ (vX.Y)
   └─ NO → 誤字修正など軽微な変更（現在はバージョンアップ不要）
```

#### ステップ2: バージョン番号の決定

現在のバージョンから、新しいバージョン番号を決定

**例**:
- 現在 v2.7 → メジャー変更の場合: v3.0
- 現在 v2.7 → マイナー変更の場合: v2.8

#### ステップ3: ドキュメントの更新

1. 統合版ドキュメントを更新
2. ファイル名を変更（バージョン番号を含める）
3. VERSION.mdに変更履歴を追加
4. 分割版を更新（必要に応じて）
5. 分割版フォルダをリネーム（バージョン番号を含める）

#### ステップ4: changelog/への記録

changelog/INDEX.mdに更新内容を記録

---

### バージョン管理のベストプラクティス

#### 1. 統合版を更新の基準とする

分割版は統合版の内容を反映したものなので、統合版が常に最新状態を保つ

#### 2. VERSION.mdを一元管理の要とする

すべてのバージョン情報はVERSION.mdに集約し、個別ファイルでバージョン管理しない

#### 3. フォルダ名・ファイル名でバージョンを可視化

一目でバージョンが分かるよう、フォルダ名・ファイル名にバージョン番号を含める

#### 4. 更新履歴は必ずchangelog/に記録

すべての更新内容はchangelog/INDEX.mdに記録し、トレーサビリティを確保

#### 5. 迷ったらマイナーバージョンアップ

メジャー/マイナーの判断に迷った場合は、マイナーバージョンアップを選択
（後から「実はメジャーだった」と判断した場合、次回メジャーアップすればよい）

---

### バージョン履歴の参照

詳細な変更履歴は以下を参照：

- **VERSION.md**: 全バージョンの変更履歴
- **changelog/INDEX.md**: 更新作業の詳細記録
- **統合版ドキュメント**: 各バージョンの実際の内容

---
```

**修正方法**:
1. Readツールで `/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Maintainer_v1.1.md` を読み込み
2. 「## Maintainerの基本原則」セクション（約55行目付近）を確認
3. Editツールで、上記内容をセクションの後に挿入

---

### Part 3: VERSION.md の更新

#### 3-1. フォルダ構造セクションの更新

**ファイルパス**: `/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件/VERSION.md`

**修正箇所**: 「### 分割版（モジュール式）」セクション（162-183行目付近）

**現在の内容**:
```markdown
### 分割版（モジュール式）
```
DOCS/作業前提条件/
├── VERSION.md                          # バージョン管理（このファイル）
├── 利用ガイド.md                        # 使い分けガイド
├── Worker/
│   ├── 00_INDEX.md                     # インデックス
│   ...
└── Reviewer/
    ├── 00_INDEX.md                     # インデックス
    ...
```
```

**新しい内容**:
```markdown
### 分割版（モジュール式）
```
DOCS/作業前提条件/
├── VERSION.md                          # バージョン管理（このファイル）
├── 利用ガイド.md                        # 使い分けガイド
├── Worker_v2.7/                        # Worker用分割版 (v2.7)
│   ├── 00_INDEX.md                     # インデックス
│   ├── 00_QUICK_REFERENCE.md           # クイックリファレンス
│   ├── 01_基本ルール.md
│   ├── 02_ファイル管理.md
│   ├── 03_バッチファイル・スクリプト規約.md
│   ├── 04_デバッグ・トラブルシューティング規約.md
│   ├── 05_指示の優先順位と矛盾時の対処.md
│   ├── 06_ハルシネーション抑止とベストプラクティス.md
│   └── 07_特殊ツール固有ルール.md
└── Reviewer_v1.5/                      # Reviewer用分割版 (v1.5)
    ├── 00_INDEX.md                     # インデックス
    ├── 00_QUICK_REFERENCE.md           # クイックリファレンス
    ├── 01_基本ルールとレビュー原則.md
    ├── 02_レビュープロセスとワークフロー.md
    ├── 03_チェックリストと評価基準.md
    └── 04_作業ログとドキュメント管理.md  # 新規作成
```
```

**修正方法**:
1. Readツールで VERSION.md を確認
2. Editツールで該当箇所を置き換え

---

#### 3-2. バージョニングルールへの参照追加

**追加位置**: 「## 📌 現在のバージョン」セクションの後（約23行目付近）

**追加内容**:

```markdown

---

## 📖 バージョニングルールについて

バージョン番号の決定基準・管理方法については、[作業前提条件_Maintainer.md](../作業前提条件_Maintainer_v1.1.md) の「作業前提条件ドキュメントのバージョニングルール」セクションを参照してください。

**概要**:
- **形式**: `vX.Y` (メジャー.マイナー)
- **メジャーバージョンアップ**: 構造的な大幅変更、複数の大きな新機能追加
- **マイナーバージョンアップ**: 新しいセクション追加、既存ルールの詳細化
- **統合版と分割版**: 常に同じバージョン番号を維持

```

**修正方法**:
1. Editツールで上記内容を挿入

---

### Part 4: 利用ガイド.md の更新

#### 4-1. フォルダ構造セクションの更新

**ファイルパス**: `/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件/利用ガイド.md`

**修正箇所**: 「## 📁 フォルダ構造」セクション（32-55行目）

**現在の内容**:
```markdown
DOCS/作業前提条件/
├── Worker/                            ← Worker（実装担当）用
│   ├── VERSION.txt                    ← バージョン管理ファイル
│   ...
└── Reviewer/                          ← Reviewer（レビュー担当）用
    ├── VERSION.txt
    ...
```

**新しい内容**:
```markdown
DOCS/作業前提条件/
├── Worker_v2.7/                       ← Worker（実装担当）用 (v2.7)
│   ├── 00_QUICK_REFERENCE.md          ← クイックリファレンス（250トークン）
│   ├── 00_INDEX.md                    ← インデックス（自動判定フロー含む、800トークン）
│   ├── 01_基本ルール.md               ← 全作業で必読（1,500トークン）
│   ├── 02_ファイル管理.md             ← ファイル管理時に読む（1,500トークン）
│   ├── 03_バッチファイル規約.md       ← バッチ作成時に読む（2,000トークン）
│   ├── 04_デバッグ規約.md             ← デバッグ時に読む（2,000トークン）
│   ├── 05_指示の優先順位.md           ← 矛盾発見時に読む（1,500トークン）
│   ├── 06_ハルシネーション抑止.md     ← 複雑な作業時に読む（1,000トークン）
│   └── 07_特殊ツール.md               ← AE/UE使用時に読む（1,500トークン）
│
└── Reviewer_v1.5/                     ← Reviewer（レビュー担当）用 (v1.5)
    ├── 00_QUICK_REFERENCE.md          ← クイックリファレンス（250トークン）
    ├── 00_INDEX.md                    ← インデックス（500トークン）
    ├── 01_基本ルールとレビュー原則.md  ← 全レビューで必読（1,000トークン）
    ├── 02_レビュープロセス.md         ← レビュー手順（2,000トークン）
    ├── 03_チェックリスト.md           ← チェックリスト（1,500トークン）
    └── 04_作業ログとドキュメント管理.md ← 作業ログ記録（1,500トークン）
```

**注**: VERSION.txt の記載を削除（実際には存在しないため）

**修正方法**:
1. Readツールで利用ガイド.md を確認
2. Editツールでフォルダ構造セクションを置き換え

---

#### 4-2. テンプレートセクションの更新

**修正箇所**: 「### Worker作業」セクション（150-161行目）、「### Reviewer作業」セクション（163-171行目）

**現在の内容**:
```markdown
# 超簡単な作業
DOCS/作業前提条件/Worker/00_QUICK_REFERENCE.mdを読んで、〇〇して

# 通常の作業
DOCS/作業前提条件/Worker/00_INDEX.mdを読んで、〇〇して

# 特定モジュールを指定したい場合
DOCS/作業前提条件/Worker/00_INDEX.mdと03_バッチファイル規約.mdを読んで、〇〇して
```

**新しい内容**:
```markdown
# 超簡単な作業
DOCS/作業前提条件/Worker_v2.7/00_QUICK_REFERENCE.mdを読んで、〇〇して

# 通常の作業
DOCS/作業前提条件/Worker_v2.7/00_INDEX.mdを読んで、〇〇して

# 特定モジュールを指定したい場合
DOCS/作業前提条件/Worker_v2.7/00_INDEX.mdと03_バッチファイル規約.mdを読んで、〇〇して
```

**Reviewer用も同様**:
```markdown
# 簡単なレビュー
DOCS/作業前提条件/Reviewer_v1.5/00_QUICK_REFERENCE.mdを読んで、〇〇をレビューして

# 通常のレビュー
DOCS/作業前提条件/Reviewer_v1.5/00_INDEX.mdを読んで、〇〇をレビューして
```

**修正方法**:
1. Editツールで `Worker/` を `Worker_v2.7/` に置き換え（replace_all: true）
2. Editツールで `Reviewer/` を `Reviewer_v1.5/` に置き換え（replace_all: true）

---

#### 4-3. バージョン管理セクションの更新

**修正箇所**: 「### 3. バージョン管理」セクション（219-230行目）

**現在の内容**:
```markdown
### 3. バージョン管理

各フォルダに `VERSION.txt` があります。

**バージョン確認**:
```
DOCS/作業前提条件/Worker/VERSION.txt
DOCS/作業前提条件/Reviewer/VERSION.txt
```

更新履歴もここに記録されます。
```

**新しい内容**:
```markdown
### 3. バージョン管理

**バージョン確認方法**:
- フォルダ名を見る: `Worker_v2.7/`, `Reviewer_v1.5/`
- VERSION.mdを確認: `DOCS/作業前提条件/VERSION.md`

**更新履歴の確認**:
- `DOCS/作業前提条件/VERSION.md`: 全バージョンの変更履歴
- `DOCS/作業前提条件/changelog/INDEX.md`: 更新作業の詳細記録

**バージョン番号の意味**:
- メジャーバージョン（v2.0 → v3.0）: 構造的な大幅変更
- マイナーバージョン（v2.7 → v2.8）: 新機能・ルール追加
```

**修正方法**:
1. Editツールで該当セクションを置き換え

---

### Part 5: changelog/INDEX.md の更新

#### 5-1. フォルダ構造セクションの更新

**ファイルパス**: `/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件/changelog/INDEX.md`

**修正箇所**: 「## 📁 フォルダ構造」セクション（1050-1063行目）

**現在の内容**:
```markdown
DOCS/作業前提条件/
├── VERSION.md                              # バージョン情報（一元管理）
├── changelog/                              # 更新履歴フォルダ
│   ├── INDEX.md                            # このファイル（更新履歴一覧）
│   ├── 2025-11-22_統合版から分割版への更新.md
│   └── ...（今後の更新ドキュメント）
├── Reviewer/                               # Reviewer用分割版
├── Worker/                                 # Worker用分割版
└── 利用ガイド.md
```

**新しい内容**:
```markdown
DOCS/作業前提条件/
├── VERSION.md                              # バージョン情報（一元管理）
├── changelog/                              # 更新履歴フォルダ
│   ├── INDEX.md                            # このファイル（更新履歴一覧）
│   ├── 2025-11-22_統合版から分割版への更新.md
│   ├── 2025-11-22_分割版フォルダ名バージョン追加とバージョニングルール定義.md
│   └── ...（今後の更新ドキュメント）
├── Reviewer_v1.5/                          # Reviewer用分割版 (v1.5)
├── Worker_v2.7/                            # Worker用分割版 (v2.7)
└── 利用ガイド.md
```

**修正方法**:
1. Readツールで INDEX.md を確認
2. Editツールで該当箇所を置き換え

---

#### 5-2. 新規更新エントリーの追加

**追加位置**: 「## 🔄 更新履歴（新しい順）」セクションの最上部

**追加内容**:

```markdown
### 2025-11-22: 分割版フォルダ名へのバージョン追加とバージョニングルール定義
- **対象**: Worker v2.7、Reviewer v1.5、Maintainer v1.1
- **内容**:
  - 分割版フォルダ名にバージョン番号を追加（`Worker/` → `Worker_v2.7/`、`Reviewer/` → `Reviewer_v1.5/`）
  - 統合版と分割版のバージョン乖離を可視化
  - バージョニングルールをMaintainerドキュメントに追加
  - 既存の運用を分析し、メジャー/マイナーバージョンの定義を明文化
- **ドキュメント**: [2025-11-22_分割版フォルダ名バージョン追加とバージョニングルール定義.md](./2025-11-22_分割版フォルダ名バージョン追加とバージョニングルール定義.md)
- **影響範囲**:
  - **フォルダ名変更**: `Worker/` → `Worker_v2.7/`、`Reviewer/` → `Reviewer_v1.5/`
  - **Maintainerドキュメント**: バージョニングルールセクション追加（約200行）
  - **VERSION.md**: フォルダ構造更新、バージョニングルール参照追加
  - **利用ガイド.md**: パス参照更新、バージョン管理セクション更新
  - **changelog/INDEX.md**: フォルダ構造更新
- **主な追加内容**:
  - メジャーバージョンアップの定義と判断基準
  - マイナーバージョンアップの定義と判断基準
  - バージョンアップ手順のフロー
  - バージョン管理のベストプラクティス
- **実装担当**: [Worker名]
- **レビュー担当**: Claude Code (Reviewer)
- **実装日**: 2025-11-22
- **ステータス**: 🔄 実装中

---

```

**修正方法**:
1. Editツールで上記内容を「### 2025-11-22: 統合版から分割版への更新」の前に挿入

---

### Part 6: 作業時間見積もり

| 作業項目 | 見積もり時間 |
|---------|------------|
| Worker フォルダのリネーム | 1分 |
| Reviewer フォルダのリネーム | 1分 |
| Maintainerドキュメントへのバージョニングルール追加 | 5分 |
| VERSION.md の更新（フォルダ構造、バージョニングルール参照） | 5分 |
| 利用ガイド.md の更新（フォルダ構造、テンプレート、バージョン管理） | 10分 |
| changelog/INDEX.md の更新（フォルダ構造、新規エントリー） | 5分 |
| **合計** | **約27分** |

---

## ✅ 作業完了後の確認項目

### フォルダリネーム
- [ ] `Worker/` が `Worker_v2.7/` にリネームされた
- [ ] `Reviewer/` が `Reviewer_v1.5/` にリネームされた
- [ ] リネーム後のフォルダ内のファイルが正常にアクセスできる

### Maintainerドキュメント
- [ ] バージョニングルールセクションが追加された
- [ ] メジャー/マイナーバージョンの定義が明確に記載されている
- [ ] バージョンアップ手順のフローが含まれている
- [ ] ベストプラクティスが記載されている

### VERSION.md
- [ ] フォルダ構造が `Worker_v2.7/`, `Reviewer_v1.5/` に更新された
- [ ] バージョニングルールへの参照が追加された

### 利用ガイド.md
- [ ] フォルダ構造セクションが更新された
- [ ] すべてのパス参照が `Worker_v2.7/`, `Reviewer_v1.5/` に更新された
- [ ] VERSION.txt の記載が削除された
- [ ] バージョン管理セクションが更新された

### changelog/INDEX.md
- [ ] フォルダ構造セクションが更新された
- [ ] 新規更新エントリーが追加された
- [ ] ステータスが正しく表示されている

---

## 📝 注意事項

1. **フォルダリネーム**: 他のプロセスがフォルダを使用していないことを確認してから実施
2. **パス参照**: 利用ガイド以外にもパス参照がある可能性があるため、実装前にGrepで確認
3. **文字エンコーディング**: すべてのファイルはUTF-8（BOM なし）で保存
4. **改行コード**: LF（Unix形式）を使用

---

## 🔗 関連ドキュメント

- **Maintainerドキュメント**: `/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件_Maintainer_v1.1.md`
- **VERSION.md**: `/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件/VERSION.md`
- **利用ガイド.md**: `/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件/利用ガイド.md`
- **changelog/INDEX.md**: `/Users/hiraihironori/Desktop/WorkSpace/DOCS/作業前提条件/changelog/INDEX.md`

---

**作成日**: 2025年11月22日
**Reviewer**: Claude Code (Reviewer)
**バージョン**: v1
