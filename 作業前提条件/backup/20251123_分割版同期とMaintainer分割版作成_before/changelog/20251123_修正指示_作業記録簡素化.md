# 修正指示書 - 作業記録の簡素化

**作成日**: 2025年11月23日
**作成者**: Maintainer
**対象**: Worker作業記録フォーマット
**優先度**: 中
**期限**: 2025年11月25日以降の作業から適用

## 背景・目的

現在の作業記録（worklog）はトークン消費が多く、Claude Codeの使用制限に達しやすい問題が発生しています。
今週、実際に使用制限で作業が停止した事例があったため、トークン効率化が急務となっています。

## 現状の問題点

1. **トークン消費量**: 現在の詳細な作業ログは1日あたり約300トークンを消費
2. **週間消費量**: 300トークン × 7日 = 約2,100トークン/週
3. **影響**: Claude Codeの利用制限に到達し、業務停止のリスク

## 修正内容

### 1. 作業記録フォーマットの変更

#### 【変更前】現在のフォーマット
```markdown
# 作業ログ - 2025年11月23日

## 作業目的
- [今日の主な作業目的を記載]

## 実施内容
1. [実施した作業1]
2. [実施した作業2]
3. [実施した作業3]

## 作成・修正したファイル
- file1.txt (新規作成)
- script.py (修正)
- data_process.py (新規作成)

## 課題・問題点
- [発生した問題や課題を記録]

## 次回タスク
- [ ] タスク1
- [ ] タスク2
```

#### 【変更後】C案ハイブリッド方式

**通常の作業記録（YYYYMMDD_worklog.md）**:
```markdown
# 20251123

## Summary
作業内容✅ | 作業内容⚠️ | 作業内容❌ | Nファイル
→ 次のアクション

## Ref（参照ドキュメント）
- 指示書名 or 仕様書名（簡潔に）

## Details（重要な作業時のみ記載）
<!--
詳細が必要な場合はここに記載
-->
```

**実際の記載例**:
```markdown
# 20251123

## Summary
CSV処理✅ API実装✅ バグ修正⚠️L42 | 5files
→ メモリリーク修正予定

## Ref
- 20251123_作業指示_CSV処理
- API仕様書v2.1

## Details
<!-- 本日は通常作業のため詳細省略 -->
```

### 2. 記載ルール

#### 状態アイコン
- ✅ : 完了
- ⚠️ : 作業中・要確認
- ❌ : エラー・失敗

#### 記載する情報（最小限）
- 作業名（簡潔に）
- 状態（アイコンで表現）
- ファイル数（主要なもののみカウント）
- 参照ドキュメント（作業指示書、仕様書など）
- 次のアクション（1行）

#### 詳細記載が必要な場合
以下の場合のみDetailsセクションに記載：
- セキュリティ問題発見時
- 重大なバグ発見時
- 大規模な変更実施時
- ユーザーからの詳細記載要求時

### 3. 週次サマリーの作成

**ファイル名**: `weekly_summary_YYYYMMDD.md`

```markdown
# Week YYYYMM-WN

## 日次一覧
```
月: 作業✅ 作業⚠️ | Nfiles
火: 作業✅ 作業✅ | Nfiles
水: 作業⚠️ 作業❌ | Nfiles
木: 作業✅ 作業✅ | Nfiles
金: 作業✅ 作業⚠️ | Nfiles
```

## 成果
- 主要成果1
- 主要成果2

## 課題
- 継続課題1

## 次週
- 予定作業
```

### 4. 参照ドキュメントの記載ルール

**Refセクション**には以下を簡潔に記載：
- 作業指示書（例: `20251123_作業指示_機能追加`）
- 仕様書（例: `API仕様書v2.1`）
- 修正指示書（例: `20251122_修正指示_バグ修正`）
- 作業前提条件（例: `作業前提条件_Worker`）
- その他参照した重要ドキュメント

**記載のポイント**:
- ファイル名は簡潔に（拡張子は省略可）
- 日付付きドキュメントは日付を含める
- バージョンがある場合はバージョンを含める
- 最大3-4個程度に絞る（主要なもののみ）

## 期待される効果

1. **トークン削減**: 約80%削減（300→60トークン/日）※Ref追加分を考慮
2. **週間削減量**: 2,100→420トークン（約1,680トークン削減）
3. **振り返り可能性**: 必要な情報は維持
4. **検索性**: キーワードベースで向上
5. **トレーサビリティ**: 作業の根拠となったドキュメントを追跡可能

## 実施手順

### Workerの作業

1. **2025年11月25日（月）から新フォーマットを適用**
2. **既存の作業ログは変更不要**（過去分はそのまま）
3. **テンプレートファイルを作成**:
   ```bash
   # DOCSフォルダに新テンプレートを保存
   DOCS/templates/worklog_template_c.md
   ```

4. **日々の作業**:
   - 作業開始時: Summaryセクションに作業予定を簡潔に記載
   - 作業完了時: 状態アイコンを更新（✅⚠️❌）
   - 重要事項発生時のみ: Detailsセクションに記載

5. **週末の作業**（金曜日または土曜日）:
   - weekly_summary_YYYYMMDD.md を作成
   - 1週間の作業を振り返り記載

## 質問・確認事項

この修正指示について不明な点がある場合は、実施前に確認してください。

## 承認

- [ ] ユーザー承認
- [ ] Worker確認
- [ ] 実施開始

---

**注記**: この変更は作業前提条件_Worker.mdの次回更新（v2.8）に反映予定です。