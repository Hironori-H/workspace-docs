# スクリプト規約 - Worker用

## 📌 このモジュールについて

**用途**: スクリプト作成時の命名規則、文字コード、エンコーディングに関する規約
**必読条件**: Shell Script(.sh)、PowerShell(.ps1)、Python(.py)スクリプトを作成する際に必読
**関連モジュール**:
- `02_ファイル管理.md` - ファイル命名規則の全般
- `04_デバッグ・トラブルシューティング規約.md` - デバッグ時のファイル管理

---

## スクリプト作成時の規約

### 重要な原則

**スクリプトは、文字コードや環境依存の問題を避けるため、日本語の使用を最小限にする。**

---

## 1. 変数名・関数名（最重要）

**ルール**: **必ず英数字のみ使用**（日本語は使用禁止）

### 対象
- Shell Script（.sh）の変数名、関数名
- PowerShellスクリプト（.ps1）の変数名、関数名
- Pythonスクリプト（.py）の変数名、関数名、クラス名

### 理由
- 文字エンコーディングの問題を回避
- 環境依存性を排除
- デバッグ時の可読性向上
- 多言語環境での互換性確保

### 正しい例

**Shell Script**:
```bash
# Shell Script
PROJECT_PATH="/path/to/projects"
UE_VERSION="5.3"
OUTPUT_DIR="/path/to/output"

check_environment() {
    echo "Checking environment..."
}
```

**Python**:
```python
# Pythonスクリプト
project_path = "/path/to/projects"
ue_version = "5.3"
output_directory = "/path/to/output"

def check_environment():
    print("Checking environment...")
```

### 誤った例（禁止）

**Shell Script**:
```bash
# Shell Script（日本語変数は使用不可）
プロジェクトパス="/path/to/projects"     # ✗ 禁止
UEバージョン="5.3"                       # ✗ 禁止
出力ディレクトリ="/path/to/output"       # ✗ 禁止

環境チェック() {                          # ✗ 禁止
    echo "環境を確認しています..."
}
```

**Python**:
```python
# Pythonスクリプト（日本語変数は避ける）
プロジェクトパス = "/path/to/projects"   # ✗ 非推奨
UEバージョン = "5.3"                      # ✗ 非推奨
出力ディレクトリ = "/path/to/output"      # ✗ 非推奨

def 環境チェック():                       # ✗ 非推奨
    print("環境を確認しています...")
```

---

## 2. コメント

**ルール**: **日本語使用可**（ただし、文字エンコーディングに注意）

### Shell Script（.sh）
- `#` コメントで日本語使用可
- ファイルは **UTF-8** で保存

```bash
# ================================================
# Unreal Engine 自動化ツール
# 作成日: 2025-11-22
# ================================================

# 環境変数を設定
UE_PATH="/Applications/Epic Games/UE_5.3"
```

### PowerShell（.ps1）
- `#` コメントで日本語使用可
- ファイルは **UTF-8** で保存（macOSではBOM不要）

```powershell
# ================================================
# Unreal Engine 自動化ツール
# 作成日: 2025-11-22
# ================================================

# 環境変数を設定
$UEPath = "/Applications/Epic Games/UE_5.3"
```

### Python（.py）
- `#` コメントで日本語使用可
- ファイルは **UTF-8** で保存（BOM不要）

```python
# ================================================
# Unreal Engine 自動化ツール
# 作成日: 2025-11-22
# ================================================

# 環境変数を設定
ue_path = "/Applications/Epic Games/UE_5.3"
```

---

## 3. 出力メッセージ（echo, print等）

**ルール**: **原則として英語を推奨**（日本語を使う場合は文字エンコーディングを考慮）

### 推奨: 英語メッセージ

```bash
echo ""
echo "================================================================================"
echo "Unreal Engine Automation Tool - Full Automation Launch v1.0"
echo "================================================================================"
echo ""
echo "[1/5] Checking environment..."
echo "[2/5] Configuring project settings..."
echo "[3/5] Launching Unreal Engine..."
echo "[4/5] Waiting for Remote Control API..."
echo "[5/5] Launching GUI tool..."
echo ""
echo "[SUCCESS] All processes completed successfully."
echo "[ERROR] Project file not found."
```

### 許容: 日本語メッセージ（ユーザー向けGUIツール等）

```bash
# ユーザー向けツールで日本語が必要な場合のみ
echo ""
echo "================================================================================"
echo "Unreal Engine 自動化ツール - 完全自動起動 v1.0"
echo "================================================================================"
echo ""
echo "[1/5] 環境確認中..."
echo "[2/5] プロジェクト設定を構成中..."
echo "[3/5] Unreal Engineを起動中..."
echo "[4/5] Remote Control API起動待機中..."
echo "[5/5] GUIツールを起動中..."
```

**注意事項**:
- macOSのターミナルはUTF-8がデフォルトなので、日本語も正常に表示される
- 文字化けを避けるため、可能な限り英語を使用することを推奨
- ログファイルに出力する場合は、UTF-8で統一

---

## 4. ファイルパス

**ルール**: **日本語を含むパスは必ずダブルクォートで囲む**

### 基本原則
- 可能な限り**英数字のパスを使用**
- やむを得ず日本語パスを使う場合は、必ずダブルクォートで囲む
- 特殊文字（括弧、スペース等）を含むパスも同様

### 正しい例

```bash
# 英数字パス（推奨）
PROJECT_DIR="/Users/user/Projects/UE_Automation"
cd "${PROJECT_DIR}"

# 日本語パスの場合は必ずクォート
PROJECT_DIR="/Users/user/Desktop/WORK/02.projects/UE(自動化調査)/Template_Effect"
cd "${PROJECT_DIR}"

# ファイル存在確認
if [[ -f "${PROJECT_DIR}/project.uproject" ]]; then
    echo "Project file found"
fi
```

### 誤った例

```bash
# クォートなし（スペースや括弧があるとエラー）
PROJECT_DIR=/Users/user/Desktop/WORK/02.projects/UE(自動化調査)/Template_Effect
cd $PROJECT_DIR                           # ✗ エラーになる

# 変数展開時にクォートなし
if [[ -f $PROJECT_DIR/project.uproject ]]; then  # ✗ 問題を起こす可能性
    echo "Error"
fi
```

### 推奨される対策

1. **プロジェクトフォルダ名は英数字のみ**
   ```
   /Users/user/Projects/UE_Automation          ✓ 推奨
   /Users/user/Projects/UE自動化調査            ✗ 避ける
   /Users/user/Projects/UE(自動化調査)          ✗ 避ける
   ```

2. **既存の日本語パスを扱う場合**
   - すべての変数を `"` で囲む（`"${VAR}"` の形式）
   - `[[ ]]` を使用した条件式を推奨
   - パスにスペースや特殊文字が含まれる前提でコーディング

---

## 5. ファイル名

**ルール**: **スクリプトファイルは英数字を強く推奨**

### スクリプトファイル（.py, .sh, .ps1）
- **必ず英数字のみ使用**
- 複数の単語は `_` で区切る
- バージョン番号も英数字

```
✓ launch_automation.sh
✓ setup_config.py
✓ data_processor_v1.py

✗ 自動化起動.sh
✗ 設定セットアップ.py
✗ データ処理_v1.py
```

### ドキュメントファイル（.md, .txt, .log）
- **日本語使用可**

```
✓ データ処理スクリプト説明.md
✓ 利用ガイド.txt
✓ エラーログ_20251122.log
```

---

## まとめ

### スクリプト作成時のチェックリスト

- [ ] 変数名・関数名は英数字のみ
- [ ] ファイル名は英数字のみ（スクリプトファイル）
- [ ] コメントは日本語OK（UTF-8で保存）
- [ ] 出力メッセージは原則英語
- [ ] パスは `"${VAR}"` 形式で引用符付き
- [ ] 日本語パス・スペース含むパスは必ずクォート
- [ ] ファイルエンコーディングはUTF-8

---

**最終更新日**: 2025年11月22日
**バージョン**: 2.0

## 変更履歴

- **v2.0** (2025-11-22): macOS対応に全面書き換え
  - バッチファイル（.bat, .cmd）→ Shell Script（.sh）に変更
  - Windowsパス例示 → macOSパス例示に変更
  - Windows固有の記述を削除
  - macOS環境での注意事項を追加
- **v1.0** (2025-11-14): 初版作成（Windows前提）
