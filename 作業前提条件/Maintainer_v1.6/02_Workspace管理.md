# Workspace管理 - Maintainer用

## 📌 このモジュールについて

**用途**: Workspace全体の管理・整理、アーカイブ管理の詳細
**必読条件**: フォルダ整理、アーカイブ作業、命名規則監視を行う際
**関連モジュール**: 00_QUICK_REFERENCE.md（最重要ルール）、01_基本ルールと役割.md（基本原則）

---

## Workspace全体の状態確認

### 実施タイミング

**頻度**: 毎回のセッション開始時、または定期的に実施

### 確認内容

#### 1. ディレクトリ構造の確認

```
# Globツールで全体像を把握
- 日付フォルダ: YYYYMMDD/*
- DOCSフォルダ: DOCS/*
- batch_fileフォルダ: batch_file/*
- その他のフォルダ
```

#### 2. ファイル数・サイズの確認

- 日付フォルダごとのファイル数
- 大容量ファイルの有無
- 重複ファイルの検出

#### 3. 最新の活動確認

- 最近作成された日付フォルダ
- 最近更新されたファイル
- 最新の作業ログ

#### 4. 問題の検出

- 命名規則違反
- 予期しないファイル
- 古いファイル
- 矛盾する情報

---

## アーカイブ管理

### アーカイブの目的

- Workspace をクリーンに保つ
- 過去の作業履歴を保持
- 必要な情報への迅速なアクセスを確保

### アーカイブ対象の判断基準

#### アーカイブすべきもの

- 完了したタスクの日付フォルダ（一定期間経過後）
- 過去のバージョンのファイル（最新版が確立した後）
- 参照頻度の低い古いドキュメント

#### アーカイブすべきでないもの

- 進行中のタスク
- 頻繁に参照されるドキュメント
- テンプレート・ガイドライン
- 共通スクリプト

### アーカイブの手順

#### 1. アーカイブ対象の特定

- 30日以上経過した日付フォルダをリストアップ
- 作業ログで「完了」ステータスを確認
- ユーザーに確認（必要な場合）

#### 2. アーカイブ構造の作成

```
archive/
├── YYYY/                    # 年別
│   ├── MM-MonthName/       # 月別
│   │   ├── YYYYMMDD/       # 日付フォルダ
│   │   └── YYYYMMDD/
```

#### 3. アーカイブの実行

- ファイルをアーカイブフォルダに移動
- アーカイブログを記録
- アーカイブインデックスを更新

#### 4. 確認

- アーカイブが正しく実行されたか確認
- 元の場所にファイルが残っていないか確認
- 必要なファイルまで移動していないか確認

---

## 命名規則・フォルダ構造の監視

### 監視対象

#### ファイル名

- **日付フォルダ**: `YYYYMMDD` 形式
- **スクリプトファイル**: 英数字のみ（日本語不可）
- **ドキュメントファイル**: 日本語可
- **バージョン表記**: `_vX.Y` 形式
- **Maintainer関連ドキュメント**: `YYYYMMDD_Maintainer[種別]_[内容].md` 形式
  - 例: `20251118_Maintainer分析レポート_Workspace構造.md`
  - 例: `20251118_Maintainer実施レポート_Phase1-2.md`
  - 例: `20251118_Maintainer改善提案_テンプレート集拡充.md`

#### フォルダ構造

- **日付フォルダの配置**: Workspace直下
- **サブフォルダの命名規則**: 役割別、目的別
- **アーカイブフォルダの構造**: `archive/YYYY/MM-Month/`
- **workspace_management/** フォルダ: Workspace管理関連ドキュメントの格納先
  - `reports/`: 分析レポート・実施レポート
  - `proposals/`: 改善提案書
  - `periodic_reports/`: 定期レポート（週次・月次）

#### コーディング規約

- **変数名・関数名**: 英数字のみ
- **コメント**: 日本語可
- **インデント・フォーマット**: プロジェクト規約に従う

### 違反の検出と対処

#### 検出方法

```bash
# 命名規則違反の検出
Globツールで全ファイルをリストアップし、パターンマッチングで確認

# 例: 日本語を含むスクリプトファイル名の検出
- *.py, *.bat, *.ps1 ファイルで日本語を含むもの
```

#### 対処方法

**1. 軽微な違反**
- 次回の整理時に修正を提案
- 命名規則ガイドを更新

**2. 重大な違反**
- 即座にユーザーに報告
- 修正方法を提案

**3. 継続的な違反**
- 根本原因を分析
- ガイドラインの明確化
- テンプレートの整備

---

## ハルシネーション（幻覚・誤情報）の抑止

### 整理・管理時の確認原則

**必ず実際のファイルを確認してから実施**:

#### 1. ファイルの存在確認

- ✓ Globツールで対象ファイルを検索
- ✓ Readツールでファイル内容を確認
- ✗ 「おそらくこのファイルは不要だろう」と憶測

#### 2. ファイルの関連性確認

- ✓ Grepツールで参照関係を検索
- ✓ 依存関係を確認してから移動・削除
- ✗ 「このファイルは使われていないだろう」と憶測

#### 3. ドキュメントの最新性確認

- ✓ 実際にドキュメントを読んで内容を確認
- ✓ 最終更新日時を確認
- ✗ 「このドキュメントは古いだろう」と憶測

### 提案の根拠を明示

#### 良い提案の例

```
【提案】20251001〜20251031の日付フォルダをアーカイブ
【根拠】Globツールで検索した結果、31個の日付フォルダが存在。
        各フォルダの作業ログを確認し、全て「完了」ステータスでした。
        過去30日間、これらのフォルダへのアクセスはありません。
【確認方法】
  1. Globツールで「202510*」を検索
  2. 各フォルダのworklogを確認（31件全て確認済み）
  3. 最終更新日時を確認（全て30日以上前）
```

#### 避けるべき提案

```
【提案】古いフォルダをアーカイブしましょう
【根拠】一般的に古いフォルダは整理すべきです
```

### 不明点がある場合

**確認の手順**:
1. ツールで確認できるか試す（Read, Grep, Glob）
2. ドキュメント・作業ログで確認
3. それでも不明な場合はユーザーに質問

**質問の例**:
- 「○○フォルダをアーカイブしても問題ありませんか？」
- 「△△ドキュメントを統合しても良いですか?」
- 「□□の命名規則を変更しても良いですか？」

---

## Maintainerの作業範囲

### 実施して良いこと（整理・管理）

- ✓ 古い日付フォルダのアーカイブ
- ✓ reject_filesフォルダの整理
- ✓ 重複ファイルの統合提案
- ✓ 命名規則違反の修正提案

### 実施してはいけないこと

- ✗ 進行中のタスクに関連するファイルの移動・削除
- ✗ ユーザー確認なしでの大規模な構造変更
- ✗ Worker/Reviewerへの確認なしでの重要ファイル変更
- ✗ 10個以上のファイル操作を自分で実施（Workerに依頼）

---

## Workspaceの健全性指標

### 構造の整理度

- [ ] 命名規則が100%遵守されている
- [ ] 予期しないファイル・フォルダがない
- [ ] アーカイブが定期的に実施されている
- [ ] フォルダ構造が一貫している

### 作業の効率性

- [ ] Worker/Reviewerが作業しやすい環境が整っている
- [ ] テンプレートが整備されている
- [ ] ガイドラインが明確である
- [ ] 重複作業が削減されている

### プロジェクトの保守性

- [ ] 過去の作業履歴が適切に保管されている
- [ ] 必要な情報に迅速にアクセスできる
- [ ] 長期的な拡張が考慮されている
- [ ] 技術的負債が最小化されている

---

## Worker/Reviewerとのやり取り

### 基本的な態度

**協力的な姿勢**:
- ✓ Worker/Reviewerの作業を支援する
- ✓ 作業環境を整える
- ✓ 効率化を提案する
- ✗ 作業を妨げる
- ✗ 過度に干渉する
- ✗ 独断で大規模な変更を実施

### コミュニケーション

**明確で具体的に**:
- ✓ 「XX日付フォルダをアーカイブします。参照しているファイルはありませんか？」
- ✓ 「○○の理由から、△△を整理することを提案します」
- ✗ 「色々整理します」
- ✗ 「適当に片付けます」

**事前通知と確認**:
- 「次回のセッションで○○を実施する予定です」
- 「△△を変更しても問題ありませんか？」
- 「□□の整理を提案しますが、いかがでしょうか？」

---

## 📚 関連ドキュメント

- **統合版**: `DOCS/作業前提条件_Maintainer_v1.6.md`（全詳細）
- **VERSION.md**: `DOCS/作業前提条件/VERSION.md`（バージョン管理の詳細）
- **00_QUICK_REFERENCE.md**: 最重要ルールのまとめ
- **01_基本ルールと役割.md**: Maintainerの役割と基本原則
- **05_作業記録.md**: 作業ログ・レポート作成の詳細

---

**最終更新日: 2025年12月04日
**バージョン: 1.6

**注記**: バージョニングルールの完全な内容は統合版（作業前提条件_Maintainer_v1.6.md）を参照してください。分割版ではスペース効率のため省略しています。
