# 依存関係・使用ツール一覧図

## システム構成図

```mermaid
graph TB
    subgraph "開発環境"
        OS[macOS]
        PS[PowerShell 7.x]
        Terminal[Terminal<br/>bash/zsh]
    end

    subgraph "プログラミング言語"
        Python[Python 3.x]
        Node[Node.js]
        Shell[Shell Script]
    end

    subgraph "クリエイティブツール"
        AE[Adobe After Effects]
        UE[Unreal Engine 5.x]
    end

    subgraph "バージョン管理"
        Git[Git]
        GitHub[GitHub]
    end

    subgraph "エディタ・IDE"
        VSCode[VS Code]
        Editor[テキストエディタ]
    end

    OS --> PS
    OS --> Terminal
    OS --> Python
    OS --> Node
    OS --> Shell
    OS --> AE
    OS --> UE
    OS --> Git
    OS --> VSCode

    Python --> Git
    Shell --> Git
    PS --> Git

    Git --> GitHub
```

---

## Python 依存関係

```mermaid
graph LR
    Python[Python 3.x] --> Pip[pip]
    Python --> StdLib[標準ライブラリ]

    Pip --> Pandas[pandas]
    Pip --> NumPy[numpy]
    Pip --> Requests[requests]
    Pip --> Openpyxl[openpyxl]

    StdLib --> Pathlib[pathlib]
    StdLib --> JSON[json]
    StdLib --> CSV[csv]
    StdLib --> Logging[logging]
    StdLib --> Argparse[argparse]
    StdLib --> Datetime[datetime]
    StdLib --> OS[os]

    style StdLib fill:#e1f5ff
    style Pathlib fill:#e1f5ff
    style JSON fill:#e1f5ff
    style CSV fill:#e1f5ff
    style Logging fill:#e1f5ff
    style Argparse fill:#e1f5ff
    style Datetime fill:#e1f5ff
    style OS fill:#e1f5ff
```

---

## PowerShell モジュール依存関係

```mermaid
graph LR
    PS[PowerShell 7.x] --> Core[PowerShell Core<br/>Modules]

    Core --> Management[Microsoft.PowerShell.Management]
    Core --> Utility[Microsoft.PowerShell.Utility]
    Core --> Security[Microsoft.PowerShell.Security]

    PS --> PSGallery[PowerShell Gallery]
    PSGallery --> Custom[カスタムモジュール]

    style Management fill:#bfe6ff
    style Utility fill:#bfe6ff
    style Security fill:#bfe6ff
```

---

## After Effects 依存関係

```mermaid
graph TB
    AE[Adobe After Effects] --> ExtendScript[ExtendScript Toolkit]
    AE --> CEP[CEP Extensions]

    ExtendScript --> JSX[.jsx Scripts]
    CEP --> HTML[HTML5 Panels]

    AE --> Plugins[Third-party Plugins]
    Plugins --> Plugin1[Element 3D]
    Plugins --> Plugin2[Trapcode Suite]
    Plugins --> Plugin3[その他]

    AE --> MediaEncoder[Adobe Media Encoder]
```

---

## Unreal Engine 依存関係

```mermaid
graph TB
    UE[Unreal Engine 5.x] --> Blueprint[Blueprint System]
    UE --> CPP[C++ Development]
    UE --> Python[Python Editor]

    CPP --> VS[Visual Studio 2022]
    CPP --> VSCode2[VS Code]

    Python --> UnrealPy[unreal module]

    UE --> Plugins[Plugins]
    Plugins --> BuiltIn[Built-in Plugins]
    Plugins --> ThirdParty[Third-party Plugins]

    UE --> Content[Content Browser]
    Content --> Assets[Assets]
    Content --> Materials[Materials]
    Content --> Blueprints[Blueprints]
```

---

## ワークスペース構造

```mermaid
graph TB
    Workspace[workspace/] --> DateFolders[日付フォルダ<br/>YYYYMMDD/]
    Workspace --> Fixed[固定フォルダ]

    DateFolders --> Worklog[YYYYMMDD_worklog.md]
    DateFolders --> Scripts[スクリプトファイル]
    DateFolders --> Log[log/]
    DateFolders --> TestData[test_data/]
    DateFolders --> Error[error_YYYYMMDD_xxx/]

    Fixed --> DOCS[DOCS/]
    Fixed --> BatchFile[batch_file/]
    Fixed --> DB[database_difinition/]
    Fixed --> UC[usecase_difinition/]
    Fixed --> Reject[reject_file/]

    DOCS --> PreReqWorker[作業前提条件_Worker.md]
    DOCS --> PreReqReviewer[作業前提条件_Reviewer.md]
    DOCS --> Prompt[Claude_プロンプトテンプレート.md]
    DOCS --> Trouble[トラブルシューティング_*.md]
    DOCS --> Quick[クイックリファレンス_*.md]
    DOCS --> Coding[コーディング規約_*.md]
    DOCS --> FAQ[ClaudeCode_FAQ.md]
    DOCS --> Dependency[依存関係図.md]

    BatchFile --> Templates[templates/]
    Templates --> ShellTpl[template_script.sh]
    Templates --> PyTpl[template_python.py]
```

---

## Git ワークフロー

```mermaid
graph LR
    Work[作業ディレクトリ] -->|git add| Stage[ステージング<br/>エリア]
    Stage -->|git commit| Local[ローカル<br/>リポジトリ]
    Local -->|git push| Remote[リモート<br/>リポジトリ]

    Remote -->|git fetch| Local
    Remote -->|git pull| Work

    Local -->|git checkout| Branch[ブランチ]
    Branch -->|git merge| Local
```

---

## データフロー

```mermaid
graph LR
    Input[入力データ] --> Script[スクリプト<br/>Python/Shell/PS]
    Script --> Process[データ処理]
    Process --> Output[出力データ]

    Output --> Log[log/<br/>出力ファイル]

    Script --> Error{エラー?}
    Error -->|Yes| ErrorLog[error_xxx/<br/>エラーログ]
    Error -->|No| Success[正常終了]

    TestData[test_data/<br/>テストデータ] --> Script
```

---

## ツール間の連携

```mermaid
graph TB
    Claude[Claude Code] --> Python
    Claude --> PowerShell
    Claude --> Shell

    Python --> CSV[CSVファイル]
    Python --> JSON[JSONファイル]
    Python --> Excel[Excelファイル]

    PowerShell --> Files[ファイル操作]
    PowerShell --> System[システム管理]

    Shell --> Auto[自動化タスク]
    Shell --> Schedule[スケジュール実行]

    CSV --> AE
    JSON --> UE

    AE --> Render[レンダリング<br/>出力]
    UE --> Package[パッケージ化<br/>出力]
```

---

## 外部サービス連携（オプション）

```mermaid
graph TB
    Local[ローカル環境] --> GitHub[GitHub]
    Local --> Cloud[クラウドストレージ]
    Local --> API[外部API]

    GitHub --> Actions[GitHub Actions]
    Cloud --> OneDrive[OneDrive]
    Cloud --> GoogleDrive[Google Drive]

    API --> Weather[天気API]
    API --> Data[データAPI]
```

---

## バージョン情報管理表

**注意**: 以下のバージョン情報は参考値です。実際のバージョンは以下のコマンドで確認してください：
```bash
python --version
powershell --version
git --version
```

### 主要ツールバージョン

| ツール名 | バージョン | インストール場所 | 備考 |
|---------|-----------|----------------|------|
| macOS | Sonoma 14.x | - | OS |
| PowerShell | 7.x | /usr/local/bin/pwsh | Core版（Homebrew経由） |
| Python | 3.x | /usr/local/bin/python3 | Homebrew推奨 |
| Git | 2.x | /usr/bin/git | Xcode Command Line Tools |
| VS Code | Latest | /Applications/Visual Studio Code.app | |
| Adobe After Effects | CC 20xx | /Applications/Adobe After Effects 20xx/ | Creative Cloud |
| Unreal Engine | 5.x | /Users/Shared/Epic Games/ | |

### Pythonパッケージ

| パッケージ名 | バージョン | 用途 |
|-------------|-----------|------|
| pandas | Latest | データ処理 |
| numpy | Latest | 数値計算 |
| requests | Latest | HTTP通信 |
| openpyxl | Latest | Excel操作 |
| pytest | Latest | テスト |

### PowerShell モジュール

| モジュール名 | バージョン | 用途 |
|-------------|-----------|------|
| PSScriptAnalyzer | Latest | 静的解析 |
| Pester | Latest | テスト |

---

## 依存関係の更新手順

### Python パッケージ
```bash
# 一覧確認
pip list

# アップデート
pip install --upgrade package_name

# requirements.txt から一括インストール
pip install -r requirements.txt

# requirements.txt 生成
pip freeze > requirements.txt
```

### PowerShell モジュール
```powershell
# インストール済みモジュール確認
Get-InstalledModule

# アップデート
Update-Module -Name ModuleName

# すべて更新
Get-InstalledModule | Update-Module
```

### Git
```bash
# バージョン確認
git --version

# macOS: Homebrew経由で更新
brew upgrade git

# または Xcode Command Line Tools の更新
xcode-select --install
```

---

## 新しいツール追加時の手順

1. **依存関係の確認**
   - 必要なライブラリ・モジュール
   - バージョン要件

2. **インストール**
   - 公式サイトからダウンロード
   - パッケージマネージャーで取得

3. **環境変数の設定**
   - PATH に追加
   - 必要に応じて他の環境変数を設定

4. **動作確認**
   - バージョン確認コマンド実行
   - 簡単なテスト実行

5. **ドキュメント更新**
   - この依存関係図を更新
   - DOCS/作業前提条件_Worker.md の「特殊ツール」セクションに追加
   - 必要に応じてトラブルシューティング文書を作成

---

## トラブルシューティング

### 依存関係の問題が発生した場合

1. **バージョンを確認**
   ```bash
   python --version
   pip --version
   git --version
   ```

2. **環境変数PATHを確認**
   ```powershell
   $env:Path
   ```

3. **再インストール**
   - アンインストール後、最新版をインストール

4. **ログを確認**
   - エラーメッセージの詳細を読む
   - 該当する言語のトラブルシューティング文書を参照

---

**最終更新日**: 2025年11月13日
**バージョン**: 1.1

**変更履歴**:
- **v1.1** (2025-11-13):
  - Python依存関係図の修正（標準ライブラリを正しく表示）
  - openpyxlを図に追加
  - ワークスペース構造図に依存関係図.mdを追加
  - バージョン情報に確認コマンドの注記を追加
- **v1.0** (2025-11-13): 初版作成

**次回更新時の確認事項**:
- 各ツールのバージョンを最新に更新
- 新しく追加したツール・ライブラリを追記
- 依存関係の変更を反映
